<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin> <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.osate.aadl2.instance.ui.InstanceModelTester"
            id="org.osate.aadl2.instance.ui.InstanceModelTester"
            namespace="org.osate.aadl2.instance.ui"
            properties="isInstanceModel"
            type="org.eclipse.core.resources.IFile">
      </propertyTester>
   </extension>
         <extension
               point="org.eclipse.ui.commands">
            <command
                  id="org.osate.aadl2.instance.ui.generateTextualInstance"
                  name="Generate Textual Instance">
            </command>
         </extension>
         <extension
               point="org.eclipse.ui.menus">
            <menuContribution
                  allPopups="false"
                  locationURI="popup:org.osate.ui.navigator.AadlNavigator?after=additions">
               <command
                     commandId="org.osate.aadl2.instance.ui.generateTextualInstance"
                     style="push">
               </command>
            </menuContribution>
         </extension>
         <extension
               point="org.eclipse.ui.handlers">
            <handler
                  class="org.osate.aadl2.instance.ui.GenerateTextualInstanceHandler"
                  commandId="org.osate.aadl2.instance.ui.generateTextualInstance">
               <enabledWhen>
                  <with
                        variable="selection">
                     <and>
                        <count
                              value="1">
                        </count>
                        <iterate
                              ifEmpty="false"
                              operator="and">
                           <instanceof
                                 value="org.eclipse.core.resources.IFile">
                           </instanceof>
                           <test
                                 property="org.eclipse.core.resources.extension"
                                 value="aaxl2">
                           </test>
                           <test
                                 forcePluginActivation="true"
                                 property="org.osate.aadl2.instance.ui.isInstanceModel">
                           </test>
                        </iterate>
                     </and>
                  </with>
               </enabledWhen>
            </handler>
         </extension>

</plugin>
