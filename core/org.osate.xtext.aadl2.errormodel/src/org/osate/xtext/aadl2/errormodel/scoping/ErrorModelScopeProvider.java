/*
 * generated by Xtext
 */
package org.osate.xtext.aadl2.errormodel.scoping;

import java.util.ArrayList;
import java.util.List;

import org.eclipse.emf.common.util.EList;
import org.eclipse.emf.ecore.EReference;
import org.eclipse.xtext.naming.QualifiedName;
import org.eclipse.xtext.resource.EObjectDescription;
import org.eclipse.xtext.resource.IEObjectDescription;
import org.eclipse.xtext.scoping.IScope;
import org.eclipse.xtext.scoping.impl.AbstractDeclarativeScopeProvider;
import org.eclipse.xtext.scoping.impl.SimpleScope;
import org.osate.xtext.aadl2.errormodel.errorModel.ErrorBehaviorEvent;
import org.osate.xtext.aadl2.errormodel.errorModel.ErrorBehaviorState;
import org.osate.xtext.aadl2.errormodel.errorModel.ErrorBehaviorStateMachine;

/**
 * This class contains custom scoping description.
 * 
 * see : http://www.eclipse.org/Xtext/documentation/latest/xtext.html#scoping
 * on how and when to use it 
 *
 */
public class ErrorModelScopeProvider extends AbstractDeclarativeScopeProvider {
	public IScope scope_ErrorBehaviorState(ErrorBehaviorStateMachine context,
			EReference reference) {
		ErrorBehaviorStateMachine owner = org.eclipse.xtext.EcoreUtil2.getContainerOfType(context,
				ErrorBehaviorStateMachine.class);
			return createScope(owner.getStates());
			}

//	public IScope scope_ErrorBehaviorEvent(ErrorBehaviorStateMachine context,
//			EReference reference) {
//		ErrorBehaviorStateMachine owner = org.eclipse.xtext.EcoreUtil2.getContainerOfType(context,
//				ErrorBehaviorStateMachine.class);
//			return createScope(owner.getEvents());
//			}
	
	private IScope createScope(EList<ErrorBehaviorState> members) {
		// can be written more functional with google collections
		List<IEObjectDescription> elements = new
		ArrayList<IEObjectDescription>(members.size());
		for(ErrorBehaviorState member: members) {
		elements.add(createIEObjectDescription(member));
		}
		return new SimpleScope(elements);
		}
//	private IScope createScope(EList<ErrorBehaviorEvent> members) {
//		// can be written more functional with google collections
//		List<IEObjectDescription> elements = new
//		ArrayList<IEObjectDescription>(members.size());
//		for(ErrorBehaviorEvent member: members) {
//		elements.add(createIEObjectDescription(member));
//		}
//		return new SimpleScope(elements);
//		}
	
	protected IEObjectDescription createIEObjectDescription(ErrorBehaviorState ebs) {
		return EObjectDescription.create(QualifiedName.create(ebs.getName()), ebs, null);
	}
	
	protected IEObjectDescription createIEObjectDescription(ErrorBehaviorEvent ebs) {
		return EObjectDescription.create(QualifiedName.create(ebs.getName()), ebs, null);
	}

	}
